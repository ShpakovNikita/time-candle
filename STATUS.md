# Time Candle
### Рассмотрение ближайших аналогов:
* [Google calendar](https://calendar.google.com/calendar/r)
* [Centrallo](https://centrallo.com/)
* [Todoist](https://ru.todoist.com/)
* [TickTick](https://ticktick.com/)
* [YouTrack](https://www.jetbrains.com/youtrack/)
### Рассмотренные проекты:
\# Здесь рассмотрены только какие-либо выделяющиеся стороны приложения.
```
(Дальнейшее рассмотрение других проектов не первоочередная цель)
```
##### Google calendar
* minus:
  * Отсутствие командного планирования
* plus:
  * Очень гибкая работа с датами и промежутками времени
  * Авто планировщик времени. Очень крутая штука
  * Дезигн
- - - -
##### Centrallo
* minus:
  * Много платного контента, например количество записок, гибкая работа с датами
* plus:
  * Возможность отправлять задачи в виде веб-листовки
  * Интересная система архивации задач
- - - -
##### YouTrack
* minus:
  * Платный софт
* plus:
  * Очень продвинутая строка сортировки задач
  * Потенциально большая возможность для улучшения разработки ПО за счет отслеживания огромного количества деталей
- - - -
##### Yandex Tracker
* minus: 
  * Платный софт
* plus:
  * Удобная строка сортировки задач
  * Хорошая Agile доска, возможность построяения различных графиков внутри проекта по различным характеристикам и тегам.

##### TickTick
* plus:
  * Довольно простое приложение не требующее никакой регистрации и отлично справляющееся со своими задачами
  * Платный контент хоть и есть, но по сути это лишь темы
  * Удобная и самая простая и одновременно с большими возможностями система календаря
- - - -
##### Todoist
* minus:
  * Много платного контента 
* plus:
  * Впринципе простое приложение делающее свои задачи. Возможно основной потенциал раскрывается на командой работе над проектом (платная функция)  

Больше всего мне понравился YouTrack, но Yandex Tracker при первом же рассмотрении является очень близким к нему, + удобная система построения графиков, просто топ. Поэтому своей целью ставлю сделать приложение ближе всего к YouTrack / Yandex Tracker, с бызовыми возможностями TickTick для решения личных задач.

## Сценарии использования
* Мне необходимо каждый день сделать какую-либо разминку, или же в течение какого-то времени делать лабораторные работы по ИСП, условно, по средам и пятницам. Я смогу это пометить у себя в приложении и проверить задачи, когда открою свой веб сайт или же через консоль проверю задачи с наибольшим приоритетом на как можно ближние сроки.
* Я делаю лабу по физике. Условно говоря кто-то пишет отчет, кто-то занимается практикой, а кто-то теорией. Я могу создать у себя локальную группу пользователей и отмечать, что у кого сделано, и при желании вывести мои задачи вместе с их задачами или же просто свои задачи в группе вместе со своими задачами вне группы. Ну и сделать подобную возможность как можно более гибкой с разными вариантами составления задач и отображения их.
* Я работаю над какой-либо инди игрой в небольшой команде и мне необходимо вести для себя учет того, насколько продуктивно мы проводим время над ней. Для этого каждый пользователь имеет либо свою учетную запись, либо пароль от организации (что именно лучше будет - пока не ясно) и под каким-либо именем может помечать выполненные таски (которые были поставлены либо самим пользователями для себя, либо с пониженным приоритетом для других пользователей (приоритет может быть повышен по желанию лидера)), поставленные лидером или другим пользоваталем, парралельно имея возможность оставлять комментарии или ссылки на выполненную работу в каком-либо удаленном хранилище.
* В идеале, если все пойдет так, как надо, то предыдущий пример можно дополнить так: какой-либо член команды получает задачу с большим приоритетом, но ему нужна помощь с ней, поэтому он разбивает ее на несколько подзадач для себя и в случае помощи для других членов команды (но с низким приоритетом). Там уже лидер может посмотреть нагляднее чем в предыдущем примере, зачем нужна та или иная задача и может дать более объективный приоритет или же разберется в этом быстрее.
* Я распланировал на неделю большое количество заданий с разным приоритетом. Кучно просматривать информацию не представляется продуктивным. Я могу ввести строку фильтра. По умолчанию это является приоритет. Например date: 12-01-2018, 14-01-2018 sort: show_close выведет все задачи с этих дат по близости выполнения. Или же что-то наподобие date: 12-01-2018, 14-01-2018 priority: minor, high, medium выводит сперва самые не важные, потом важные, потом средние. И допустим мне необходимо в моем проекте игры найти все задания художников. Для этого я ищу по обобщенной должности artist, например position: artist. Через запятую я мог бы перечислить и другие теги, принадлежащие классу position. Далее я хочу все дочерние задачи первого уровня вложенности для выведенных задач. position: artist show: child 1. 
\*Данный пример как бы показывает, зачем нужен подобный поиск в строке. Конкретно для уточнения просматриваемых задач.

## Возможности
\* возможно данный пункт будет очень сильно изменяться. Ниже написанное пока ближе к программе максимума.
#### console app
- - - -
Планируются урезанные возможности final console app без гибкой работы с аргументами строки. При подаче каких-либо простейших аргументов командной строке, наподобие --addtask, --status, --groups. При выборе каждого пункта открывается новое консольное меню. Добавить таску -> групповая, личная, проект. И требуется заполнить соответствующие данные в заданном формате для успешного действия. Действия с группами -> добавить группу, просмотреть группы, изменить группу. Текущее состояние -> вывод текущих заданий, вывод выполненных заданий, мониторинг по графику (mathplotlib) в течение промежутка времени. В большинстве приведенных меню будут дальнейшие разветвления.
#### final console (or not console) app
- - - -
Пользователь посылает аргументы приложению для каждого действия. Например он указывает опцию --task и ему предлагают ввести дату таски в формате yyyy-mm-dd, название, дополнительные комментарии, приоритет и т д. Должна будет быть также возможность с помощью опций сделать все это в одну строку или с какими-либо дефолтными значениями. Также можно создать группу, например --addgroup group. А в нее уже добавлять пользователей, наподобие --adduser some_new_user. От имени группы можно создавать таски и подобно простой созданию простой задачи, только с указанием текущей группы и пользователя группы, для которого таска. Возможно сделать поиск по текущим задачам, например --search и указать какой либо шаблон поиска. Текущие задачи можно вывести с помощью --tasks, и также можно указать приоритеты для вывода (по умолчанию программа выссчитывает их сама). Возможно просмотреть также все таски, даже выполненные, с помощью --status. Также возможна сортировка вывода, например по дате выполнения, по приоритету и т д. Просмотреть подробнее (все ее примечания) какую-либо таску можно с помощью --show task_id. Таски (выполненные, не выполненные) можно удалять --remove task_id, выполнять --check task_id (возможны указания комментариев), переназначать --swap task_id new_user_in_group (с комментариями), разделять --divide task1 task2 etc и многое другое.  
Таким образом, основной целью ставится сделать организованную гибкую работу с командной строкой для мощного (если это можно будет так названть) мониторинга групповых и личных задач (все локально). 
\* Возможен GUI через wxWidgets или PySide1-2 вместо полноценной консольной оболочки, а возможно и то и другое. Для GUI версии основное описание будет находиться в сноске \#web app В любом случае, что-то станет основной программой а внедрение обоих фич является программой "максимума".
#### web app
- - - -
Веб приложение будет по своему виду очень близко (если таковое будет) к GUI версии десктопного приложения, с уклоном в материал дизайн, чему я неприменно уделю должное внимание как интересующей меня теме (несмотря на приоритеты в программной состовляющей). У каждого человека будет своя учетная запись. Возможность создавать таски, группы, групповые таски. Создать цель -> групповая цель, личная цель. Проекты -> создать проект, текущие проекты, добавить пользователя к текущему проекту (возможно как и "локального", так и существующего. Не могу представить, стоит ли оставить только существующего). Создать группу -> добавить "локальных" пользователей, пригласить пользователя в группу. Таски будут располагаться в центре, на основном холсте в виде списка или же материал дезигн карт с краткими описаниями. Подробная информация будет выводиться как большая карта со статусом, возможными подзадачами (или задачей предком), комментариями по поводу задачи (в формате мини чата), результатом выполнения (в случае работы над проектом). Вся панель управления (группы, пользователи, настройки аккаунта и прочее меню) находится слева (аналогия с gmail). Сверху будет иметься строка, которая будет задавать фильтрацию поиска в стиле YouTrack, но в сильно упрощенном формате.

## Разработка:
**Текущая цель**: создание базовых классов (задач), сериализации их в json, организация папок данных и работа с простым контролем задач и календарем.

## Логическая архитектура
Планируется реализовать архитектуру согласно шаблону MVC. Будет созданая основная модель, которая представлена базовыми сущностями таска, проект, юзер, и прочие вспомогательные компоненты. Основное взаимодействие будет происходить между ними, и будут отслеживаться изменения в модели, которые фиксирует Event Handler и формирует запрос уровню хранения данных. Уровень хранения данных входит в основную модель. В нем представлен основной интерфейс и адаптеры каждого важного компонента, реализующие его. Все в итоге сводится к запросам из базы данных, представленной либо с помощью простой json сериализации либо с помощью SQL. Для поиска и прочих действий, требующие взятия отдельных данных из БД (на данный момент видится необходимым только для класса Task) существует функция взятия таски из БД по атрибуту, значению, uid. Имеется также компонента controller, в которой происходит обработка введенных данных в помощью argparse, валидация распарсенных данных и формирование запросов исходя из данных. Компонента view представляет данные для пользователя, будет одна из наиважнейших частей при работе с Джанго. Также model должна совершенно независеть от controller и view, а те в свою очередь должны. Схему логической архитектуры можно посмотреть в файле Time-Candle MVC.png.

## Базовый проект (1 пункт плана работы)
1.Создание системы календаря, отслеживания времени, создание меток на определённые точки времени с точностью до 5 минут. Базовые классы, сериализация (json), простой консольный интерфейс.
\#todo_time:16.03 - 23.03 (Сдвиг сроков на 30.04)  
2.Реализация добавления тех самых меток. Метки разделить на два типа: личные и совместные (проектные). И реализовать их.  
\#todo_time: 
(Полное изменение сроков. До 05.05)
3.Создать систему групп пользователей. Интеграция меток для пользователей групп.  
\#todo_time:26.03-30.03 (Задание полностью отменено. Все во 2 пункт работы)  
4.Дополнение консольного интерфейса для более гибкой работы, с учётом спланированного веб интерфейса. Расширение поиска и вывода. Параллельное принятое решений с другими задачами.  
\#todo_time:16.03-30.03 (Сдвиг сроков на 10.05)  
- - - -
\#bonus  
```
При наличие времени требуется создать работу нескольких пользователей через сервер с онлайн системой групп пользователей (с наличием лидера, который может назначать задачи пользователям) и независимым делением задач. (См. изменения выше)
```
- - - -
## Примерный план работы
1.Полноценная система оставления персональных и групповых офлайн заметок на календаре. Возможность оставления групповых онлайн заметок. Смотри [Базовый проект].  
\#todo_time: until 1.04 (Сдвиг сроков на 30.04)  
2.Система оставления профессиональных расширенных заметок из 1 пункта. Возможность работать над проектами. Возможность поиска по этому отдельному классу заметок, гибкая система приоритетов и трекинга. Инструменты для поиска и вывода задач с помощью одной строки (см. YouTrack). 
\#todo_time: until 25.04 (Сдвиг сроков на 15.05)
3.Более продуманная система UI для веб приложения. Начало берет из пункта 1, последовательное дополнение. Продумка и работа над дезигном.  
\#todo_time: until 5.05 (Отменено. Сделано в пункте 4.)
4.Джанго освобожденный. Прикручивание всех фишек из предыдущих пунктов к собственному приложению.  
\#todo_time: until 20.05 (Сдвиг сроков на 16.06)
5.Наждачка. Реализация того, чего хотелось но не успел. Исправление костылей, возможная оптимизация.  
\#todo_time: until 15.06 (Сдвиг сроков на 22.06)

## Tags:
\#todo:будет дополняться
\#todo_time:время в виде даты  
\#bonus:желательная со временем функция  
\#minus:минусы приложения  
\#plus:плюсы приложения  

## Commands
#### search bar
\# todo

# Status
* **07.03.2018 - 18.03.2018** --- _ведется создание основного тз_ 
* **18.03.2018** - **26.05.2018** --- _ведется создание базового приложения_ 
  * **18.03.2018** - **26.05.2018** --- _см. Базовый проект п.1_ 
* **26.05.2018** - **28.06.2018** --- _ведется создание веб интерфейса_
* Web fast prorotype with bad ui done

# Fast todo:
( Список меняется )
- изменить в библиотеке все на енамы а не дикты и переделать с консоли со строк на цифры (\#DONE)
- доделать добавление чайлд таска, просмотра и его изменения (\#DONE)
- query requests (\#DONE)
- пофиксить время тасок (кривое задание + отображение) (\#DONE)
- добавить метку что таска проектная (и соответственно имя проекта (вариант реализации: просто присобачить к доменному обьекту доп поле, которое по сути будет являться тайтлом проекта по айди, звучит не плохо)) (\#DONE)
- добавить страницу отображения именно тасок специфичного проекта (вместе с этим отобразить доп карту самого проекта с описанием и т д или же сайд вью вместе со списком юзеров в проекте) (\#DONE)
- просмотр пользователей, кастомизация соответственно (\#DONE)
- добавление в проекты пользователей и нормальное отображение пользователей при добавлении к проекту / таске проекта (\#DONE)
- главная страница которая несет хоть какую-то информацию (\#DONE)
- рефактор: (\# DONE)
1) DRY (много декораторов сделать)
2) отформатировать html +
- подсветка кнопок нажатой вкладки (\#DONE)
- фикс карточек проектов (\#DONE)
- фикс периодических тасок на большую юзабельность (\#DONE or not?..)
- сделать все более юзабельным, что ли (\#DONE)
- добавить права на модифай и не давать юзерам пытаться сделать то, чего нельзя (\#DONE)
- синхронизировать uid django и uid users из time_candle (\#DONE)
- сделать чисто просмотр персональных тасок (\#DONE)
- сделать поддеревья дочерних тасок (\#DONE)
- сделать ранджирование из query (но это не точно)

- final: получить похвалу местного смотрителя лабораторных работ

- доделать postgres в main lib (\#DONE)
- залить на хост (heroku/pythonanywhere?) (\#DONE heroku)
- nginx и асинхронность (?) (Не буит((9( )

- ай-ай, тестики (\#DONE)

- добавить постраничный просмотр тасок
- добавить инструкции (\#DONE)
- наладить сервер в релиз (\#DONE)
- добавить просмотр сообщений себе же и их удалений (\#DONE)
- добавить сорт по времени в query (\#DONE)
- дисэйбл кнопки периодической таски (\#HARD TO MAKE USABLE) (причина: она не запрещает пользователю по прежнему удалить цифру и думать, что все в порядке а таска не периодичная)
- сделать карты большие реально красивыми, не зря же я делал разметки ручками (\#DONE)

- Bonus: hashtags search
